====================================================================
IDEAWALKER — PLANO DE REFACTOR DO PIPELINE COGNITIVO
VERSÃO: 1.1 (REVISÃO ARQUITETURAL)
STATUS: APROVADO PARA IMPLEMENTAÇÃO
ESCOPO: Refino do pipeline de IA e remoção de escolha manual de persona
====================================================================

OBJETIVO
--------
Refatorar o pipeline cognitivo do IdeaWalker para:
- Garantir rastreabilidade das transformações cognitivas
- Tornar as personas operadores autônomos (não opções de UI)
- Preparar o sistema para grafos, backlinks e integração com SisterSTRATA
- NÃO alterar o comportamento funcional percebido pelo usuário final

Este plano NÃO adiciona features visuais.
Trata-se de um ajuste estrutural e conceitual.

--------------------------------------------------------------------
1. DOMAIN — MODELAGEM COGNITIVA
--------------------------------------------------------------------

[MODIFY]
AIService.hpp

Introduzir o conceito de Snapshot Cognitivo como artefato de domínio
(auxiliar, não Core Entity).

Adicionar estrutura:

CognitiveSnapshot
- persona: operador aplicado (Brainstormer, Analista, etc.)
- input: texto antes da transformação
- output: texto após a transformação
- state: estado cognitivo detectado (#Chaotic, #Divergent, #Integrative, #Closing)
- timestamp: instante da operação

OBSERVAÇÕES IMPORTANTES:
- Persona = operador cognitivo (função)
- Estado Cognitivo = propriedade do texto
- NÃO criar persona "TDAH"
- Snapshots NÃO são obrigatoriamente persistidos neste momento

[MODIFY]
processRawThought(...)
- Manter retorno principal como Insight
- Permitir, opcionalmente, associar snapshots ao Insight
  (ex: via metadata estendida ou estrutura auxiliar)

--------------------------------------------------------------------
2. INFRASTRUCTURE — REGISTRO DE SNAPSHOTS
--------------------------------------------------------------------

[MODIFY]
OllamaAdapter.cpp

Durante pipelines complexos (ex: Orquestrador):
- Registrar um CognitiveSnapshot por operador executado
- NÃO sobrescrever informações sem registrar o snapshot anterior
- O texto final continua sendo o output do último operador

IMPORTANTE:
- Snapshots podem ser mantidos apenas em memória
- Persistência em disco NÃO é necessária neste estágio
- Implementação deve ser simples e não invasiva

Garantir que:
- O Insight final possa rastrear sua linhagem cognitiva internamente
- Logs de debug possam exibir a sequência de snapshots, se necessário

--------------------------------------------------------------------
3. APPLICATION — ORQUESTRAÇÃO AUTÔNOMA
--------------------------------------------------------------------

[MODIFY]
OrganizerService.cpp

- Remover qualquer lógica de escolha manual de persona
- Remover ou descontinuar setAIPersona como configuração do usuário
- Garantir que o Orquestrador seja o ponto central de decisão do pipeline

O sistema deve:
- Diagnosticar o estado cognitivo inicial do texto
- Definir automaticamente a sequência de operadores
- Executar o pipeline sem intervenção do usuário

Fallbacks existentes (ex: Analista como padrão) DEVEM ser mantidos.

--------------------------------------------------------------------
4. UI — REMOÇÃO DE SELEÇÃO DE PERSONA
--------------------------------------------------------------------

[MODIFY]
UiRenderer.cpp

- Remover o ComboBox / seletor de persona da UI
- Atualizar labels e textos explicativos:
  - “O sistema seleciona automaticamente o melhor operador cognitivo”

UI NÃO deve:
- Expor personas como escolha
- Solicitar decisões cognitivas do usuário

UI PODE futuramente:
- Exibir estado cognitivo final (de forma discreta)
- Exibir pipeline apenas em modo avançado/debug

--------------------------------------------------------------------
5. DOCUMENTAÇÃO & SINCRONIZAÇÃO
--------------------------------------------------------------------

[MODIFY]
- README.md
- CHANGELOG.md

Atualizar para refletir:
- Orquestração cognitiva autônoma
- Remoção de seleção manual de persona
- Introdução de rastreabilidade cognitiva interna

Rodar:
- Doxygen
- Build completo
- Teste manual básico de ingestão

Commitar e enviar para:
- origin/main

--------------------------------------------------------------------
6. PLANO DE VERIFICAÇÃO
--------------------------------------------------------------------

Verificação Funcional:
- Ingestão de texto e áudio continua funcionando
- Insight final gerado corretamente
- Nenhuma regressão no Kanban, Heatmap ou Inbox

Verificação Cognitiva:
- Snapshots registrados em log/console durante processamento
- Sequência de operadores coerente com o diagnóstico do texto

Verificação de UI:
- Nenhuma opção de escolha de persona visível
- Fluxo do usuário permanece simples e fluido

--------------------------------------------------------------------
7. O QUE NÃO FAZER (CRÍTICO)
--------------------------------------------------------------------

- NÃO adicionar novas personas
- NÃO misturar estado cognitivo com operador
- NÃO criar UI complexa para snapshots
- NÃO exigir configuração manual do pipeline
- NÃO alterar o formato final das notas Markdown

====================================================================
FIM DO DOCUMENTO
====================================================================
